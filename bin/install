#!/bin/bash

# Exit if any command fails
set -e

# Determine the user's home directory
if [ "$SUDO_USER" ]; then
    USER_HOME=$(eval echo ~"$SUDO_USER")
else
    USER_HOME=$HOME
fi

REPO_URL="https://raw.githubusercontent.com/maicondmenezes-at-celero/celerenv/main"
INSTALL_DIR="$USER_HOME/.celerenv"

echo "Downloading package..."
mkdir -p "$INSTALL_DIR"
wget -qO "$INSTALL_DIR/uninstall" "$REPO_URL/bin/uninstall"
wget -qO "$INSTALL_DIR/celerenv" "$REPO_URL/scripts/celerenv"

echo "Configuring environment..."
chmod +x $INSTALL_DIR/celerenv
chmod +x $INSTALL_DIR/uninstall
ln -sf $INSTALL_DIR/celerenv /usr/local/bin/celerenv

echo "Installation complete! You can now use the 'celerenv' command."
